<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Landing Page with Sections</title>
<link rel="stylesheet" href="global.css">
<style>
#portfolio{
  color: #d33a57;
  text-decoration: none;
  text-shadow: 0 0 3px rgba(0, 0, 0, 0.47);
  font-weight: bold;
  outline: none;
}

/* Section card */
section {
  position: relative;
  margin: 50% auto; /* zentriert, behält vertical spacing */
  padding: 6rem 1rem; /* horizontaler Abstand bei kleinen Screens */
  width: 90%; /* sorgt dafür, dass auf kleinen Screens Abstand bleibt */
  max-width: 900px; /* Karte wird auf großen Screens nicht breiter */
  background: rgba(0, 0, 0, 0.84);
  border-radius: 20px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.4);
  z-index: 1;
}

/* Mask container (the "slit") */
section .mask {
  position: relative;
  overflow: hidden;
  max-height: calc(100vh - 100px); /* slit size: viewport minus navbar margin */
  margin: 0 auto;
}

/* Actual text content */
section .content {
  max-width: 900px;
  margin: 0 auto;
  padding: 2rem 3rem;
  color: #ffffff;
  text-align: center;
}

/* Responsive Anpassung */
@media (max-width: 480px) {
  section {
    padding: 4rem 1rem; /* etwas weniger vertical padding */
    width: 95%; /* noch mehr Abstand zum Rand */
    border-radius: 16px;
  }
  section .content {
    padding: 1.5rem 1rem; /* Content auch horizontal nicht bündig */
  }
}
</style>
</head>
<body>

<!-- Navigation -->
<nav>
  <div class="logo"><a href="index.html">LOGO</a></div>
  <div class="nav-links" id="navLinks">
    <a id="portfolio" href="#">PORTFOLIO</a>
    <a href="#">PREISE</a>
    <a href="#">CLIENTS</a>
    <a href="#">KONTAKT</a>
  </div>
  <div class="hamburger" id="hamburger">
    <div></div><div></div><div></div>
  </div>
</nav>

<!-- Background animation -->
<canvas id="sequence"></canvas>

<!-- Sections -->
<section id="section1">
  <div class="mask">
    <div class="content">
      <h2>About Me</h2>
      <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum.</p>
      <p>More text... keep scrolling to test slit cutoff effect at top/bottom.</p>
    </div>
  </div>
</section>

<section id="section2">
  <div class="mask">
    <div class="content">
      <h2>Skills & Services</h2>
      <p>Placeholder for describing what you offer and your expertise.</p>
      <p>Extra text to demonstrate scrollable content inside the slit mask.</p>
      <p>Even more filler text to see the cutoff working nicely.</p>
    </div>
  </div>
</section>

<section id="section3">
  <div class="mask">
    <div class="content">
      <h2>Contact</h2>
      <p>Placeholder for your contact info or call to action.</p>
      <p>You can add forms or links here. They’ll also get clipped at the slit boundaries.</p>
    </div>
  </div>
</section>

<script>
// Canvas animation
const canvas = document.getElementById("sequence");
const ctx = canvas.getContext("2d");
const frameCount = 122;
const images = [];
let currentFrame = 0;
let targetFrame = 0;

const getFramePath = i => `frames1/${(i + 120).toString().padStart(4, '0')}.jpg`;

function drawImageCover(img){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  const scale = Math.max(canvas.width/img.width, canvas.height/img.height);
  const x = (canvas.width/2)-(img.width/2)*scale;
  const y = (canvas.height/2)-(img.height/2)*scale;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.drawImage(img, x, y, img.width*scale, img.height*scale);
}

function loadFrame(i){
  if(i<0||i>=frameCount) return;
  if(!images[i]){
    const img = new Image();
    img.src = getFramePath(i);
    img.onload = ()=>{if(i===currentFrame) drawImageCover(img);};
    images[i]=img;
  }
  return images[i];
}

function preloadNearbyFrames(center, range=20){
  for(let offset=-range; offset<=range; offset++){
    loadFrame(center+offset);
  }
}

loadFrame(0);
preloadNearbyFrames(0,20);

window.addEventListener('scroll', ()=>{
  const scrollTop = window.scrollY;
  const scrollHeight = document.body.scrollHeight - window.innerHeight;
  const scrollFraction = scrollTop / scrollHeight;
  targetFrame = Math.min(frameCount-1, Math.floor(scrollFraction*frameCount));
});

// Frame-by-frame animation loop
function animateFrames(){
  if(currentFrame!==targetFrame){
    const dir = targetFrame>currentFrame ? 1:-1;
    currentFrame += dir;
    const img = loadFrame(currentFrame);
    if(img?.complete) drawImageCover(img);
    preloadNearbyFrames(currentFrame,20);
  }
  requestAnimationFrame(animateFrames);
}
animateFrames();

window.addEventListener("resize", ()=>{
  if(images[currentFrame]?.complete) drawImageCover(images[currentFrame]);
});

// Hamburger menu
const hamburger = document.getElementById("hamburger");
const navLinks = document.getElementById("navLinks");
hamburger.addEventListener("click", ()=>navLinks.classList.toggle("show"));
</script>

</body>

</html>
