<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Landing Page with Sections</title>
<link rel="stylesheet" href="global.css">
<style>
html, body {
  margin: 0;
  padding: 0;
  background: #000;
  font-family: Segoe UI, sans-serif;
  overflow-x: hidden;
}

/* Fullscreen background canvas */
canvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: 0;
  object-fit: cover;
}

/* Navigation bar */
nav {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background: rgba(0,0,0,0.0);
  padding: 1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 10;
}

nav .logo { color: white; font-weight: bold; font-size: 1.5rem; }
nav .nav-links { display: flex; gap: 2rem; flex-wrap: wrap; }
nav .nav-links a { color: white; text-decoration: none; font-weight: bold; }
nav .nav-links a:hover { color: #d3ce3a; scale: 110%; }
nav .hamburger { display: none; flex-direction: column; cursor: pointer; gap: 5px; }
nav .hamburger div { width: 25px; height: 3px; background-color: white; }

@media (max-width: 500px) {
  nav .nav-links {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    background: rgba(0,0,0,0.7);
    flex-direction: column;
    align-items: center;
    padding: 1rem;
    gap: 1rem;
    z-index: 9;
  }
  nav .nav-links.show { display: flex; }
  nav .hamburger { display: flex; }
}

/* Sections */
section {
  position: relative; /* allow normal scrolling */
  margin: 200px auto;
  padding: 4rem 2rem;
  color: white;
  max-width: 800px;
  text-align: center;
  opacity: 0;
  transform: scale(0.95);
  transition: opacity 0.8s ease, transform 0.8s ease;
  z-index: 1;
}

section .content {
  background: rgba(0,0,0,0.6);
  padding: 2rem 3rem;
  border-radius: 1rem;
}
</style>
</head>
<body>

<!-- Navigation -->
<nav>
  <div class="logo">My3DSite</div>
  <div class="nav-links" id="navLinks">
    <a href="#">PORTFOLIO</a>
    <a href="#">PREISE</a>
    <a href="#">CLIENTS</a>
    <a href="#">KONTAKT</a>
  </div>
  <div class="hamburger" id="hamburger">
    <div></div><div></div><div></div>
  </div>
</nav>

<!-- Background animation -->
<canvas id="sequence"></canvas>

<!-- Sections -->
<section id="section1">
  <div class="content">
    <h2>About Me</h2>
    <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
    <p>Add more content to test scrolling inside the section.</p>
  </div>
</section>

<section id="section2">
  <div class="content">
    <h2>Skills & Services</h2>
    <p>Placeholder for describing what you offer and your expertise.</p>
    <p>Extra text to demonstrate scrollable content inside the section.</p>
  </div>
</section>

<section id="section3">
  <div class="content">
    <h2>Contact</h2>
    <p>Placeholder for your contact info or call to action.</p>
    <p>You can add forms or links here.</p>
  </div>
</section>

<!-- No fixed scroll spacer; sections define height -->

<script>
// Canvas animation
const canvas = document.getElementById("sequence");
const ctx = canvas.getContext("2d");
const frameCount = 120;
const images = [];
let currentFrame = 0;
let targetFrame = 0;

const getFramePath = i => `frames3/${i.toString().padStart(4,'0')}.jpg`;

function drawImageCover(img){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  const scale = Math.max(canvas.width/img.width, canvas.height/img.height);
  const x = (canvas.width/2)-(img.width/2)*scale;
  const y = (canvas.height/2)-(img.height/2)*scale;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.drawImage(img, x, y, img.width*scale, img.height*scale);
}

function loadFrame(i){
  if(i<0||i>=frameCount) return;
  if(!images[i]){
    const img = new Image();
    img.src = getFramePath(i);
    img.onload = ()=>{if(i===currentFrame) drawImageCover(img);}
    images[i]=img;
  }
  return images[i];
}

function preloadNearbyFrames(center, range=20){
  for(let offset=-range; offset<=range; offset++){
    loadFrame(center+offset);
  }
}

loadFrame(0);
preloadNearbyFrames(0,20);

const sections = document.querySelectorAll('section');

window.addEventListener('scroll', ()=>{
  const scrollTop = window.scrollY;
  const scrollHeight = document.body.scrollHeight - window.innerHeight;
  const scrollFraction = scrollTop / scrollHeight;
  targetFrame = Math.min(frameCount-1, Math.floor(scrollFraction*frameCount));

  // Section fade in/out
  const windowHeight = window.innerHeight;
  sections.forEach(sec=>{
    const rect = sec.getBoundingClientRect();
    if(rect.top < windowHeight*0.75 && rect.bottom > windowHeight*0.25){
      sec.style.opacity='1';
      sec.style.transform='scale(1)';
    }else{
      sec.style.opacity='0';
      sec.style.transform='scale(0.95)';
    }
  });
});

// Frame-by-frame animation loop
function animateFrames(){
  if(currentFrame!==targetFrame){
    const dir = targetFrame>currentFrame ? 1:-1;
    currentFrame += dir;
    const img = loadFrame(currentFrame);
    if(img?.complete) drawImageCover(img);
    preloadNearbyFrames(currentFrame,20);
  }
  requestAnimationFrame(animateFrames);
}
animateFrames();

window.addEventListener("resize", ()=>{
  if(images[currentFrame]?.complete) drawImageCover(images[currentFrame]);
});

// Hamburger menu
const hamburger = document.getElementById("hamburger");
const navLinks = document.getElementById("navLinks");
hamburger.addEventListener("click", ()=>navLinks.classList.toggle("show"));
</script>

</body>
</html>
