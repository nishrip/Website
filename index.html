<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Landing Page with Static Canvas</title>
<link rel="stylesheet" href="global.css">
<style>
/* === Grundlayout für Sections === */
section {
  position: relative;
  min-height: 100vh;               /* statt fixem height, damit mehr Inhalt reinpasst */
  display: flex;
  justify-content: center;
  align-items: center;
  scroll-snap-align: start;        /* sanfteres Snap-Verhalten */
  scroll-snap-stop: always;
  padding: 5vh 0;                  /* etwas vertikaler Abstand für kleinere Bildschirme */
  box-sizing: border-box;
}

/* === Overlay-Box (Mask) === */
section .mask {
  position: relative;
  width: 100%;
  max-width: 100%;        /* ganze Breite */
  background: #ffffff;    /* komplett weiß */
  color: #111111;         /* dunkle Schrift */
  box-shadow: none;       /* optional, sauberer Flat-Look */
  border-radius: 0;       /* keine Abrundung */
  padding: 4rem 2rem;     /* großzügige Innenabstände */
  box-sizing: border-box;
  box-shadow: 5px 10px 100px #000000;
}

/* === Inhalt in der Maske === */
section .content {
  padding: 2.5rem 3rem;
  color: rgb(59, 59, 59);
  text-align: left;
  max-width: 800px;
  margin: 0 auto;
}

/* === Responsives Verhalten === */
@media (max-width: 768px) {
  section .mask {
    width: 100%;
  }
  section .content {
    padding: 1.8rem 1.2rem;
  }
}

@media (max-width: 480px) {
  section {
    padding: 8vh 0;
  }
  section .mask {
    width: 100%;
  }
  section .content {
    padding: 1.5rem 1rem;
  }
}

</style>
</head>
<body>

<!-- Navigation -->
<nav>
  <div class="logo"><a href="index.html">LOGO</a></div>
  <div class="nav-links" id="navLinks">
    <a href="portfolio.html">PORTFOLIO</a>
    <a href="#">PREISE</a>
    <a href="#">CLIENTS</a>
    <a href="#">KONTAKT</a>
  </div>
  <div class="hamburger" id="hamburger">
    <div></div><div></div><div></div>
  </div>
</nav>

<!-- Canvas -->
<canvas id="sequence"></canvas>

<!-- Sections -->
<section id="section1">
  <div class="mask">
    <div class="content">
      <h2>About Me</h2>
      <p>
        Wir gestalten Räume, Produkte und Konzepte in bewegten und unbewegten Bildern.  
        Dabei liegt unser Fokus auf der Balance zwischen technischer Präzision und ästhetischem Ausdruck.  
        Jede Visualisierung ist eine visuelle Komposition – ob als Einzelbild, interaktiver Raum oder filmisches Erlebnis.
      </p>
      <p style="margin-top:1.5rem;">
        Unser Ziel: nicht nur realistische Bilder zu schaffen, 
        sondern emotionale Welten, die wirken wie Szenen eines Films – 
        präzise komponiert und künstlerisch inszeniert.
      </p>
    </div>
  </div>
</section>

<section id="section2">
  <div class="mask">
    <div class="content">
      <h2>Leistungen</h2>
      <ul style="text-align:left; display:inline-block; margin-top:1rem;">
        <li><strong>Architekturvisualisierung:</strong><br>
            <i>Aus Ihren Bauplänen entstehen ausdrucksstarke Renderings, die Räume atmosphärisch und stimmungsvoll erfahrbar machen.<br></i></li>
        <li><strong>Produktvisualisierung:</strong><br>
            <i>Detailreiche Darstellungen, die Materialien, Form und Funktion in den Mittelpunkt stellen.<br></i></li>
        <li><strong>3D-Animation & Architekturfilm:</strong><br>
            <i>Bewegte Szenen mit filmischer Dramaturgie – von der Kamerafahrt bis zur Inszenierung im Schnitt.<br></i></li>
        <li><strong>Storyboard & Filmkonzept:</strong><br>
            <i>In Zusammenarbeit mit einem erfahrenen Filmemacher entwickeln wir visuelle Erzählstrukturen, 
            abgestimmt auf Atmosphäre, Tempo und Stil des Projekts.<br></i></li>
        <li><strong>Editing, Sound & Postproduktion:</strong><br>
            <i>Professioneller Filmschnitt, Farbkorrektur, Sounddesign und visuelle Effekte (SFX) als Ergänzung zur Animation.<br></i></li>
        <li><strong>Interaktive Erlebnisse:</strong><br>
            <i>Virtuelle Rundgänge mithilfe 360°-Panoramen oder Vergleichsslider ermöglichen 
            immersive Präsentationen, die Raum und Perspektive neu definieren.<br></i></li>
      </ul>
    </div>
  </div>
</section>

<section id="section3">
  <div class="mask">
    <div class="content">
      <h2>Contact</h2>
      <p>Placeholder for contact details.</p>
    </div>
  </div>
  <div class="footer">
    <div class="footerContent" id="footerContent">
    <a href="#">Datenschutz</a>
    <a href="#">Impressum</a>
    </div>
  </div>
</section>

<script>
const canvas = document.getElementById("sequence");
const ctx = canvas.getContext("2d");
const frameCount = 120;
const images = [];
let currentFrame = 0;
let targetFrame = 0;

// --- Fixe Bildschirmgröße --- //
let canvasWidth = window.screen.width;
let canvasHeight = window.screen.height;

// Canvas einmalig aufsetzen (keine spätere Anpassung)
canvas.width = canvasWidth;
canvas.height = canvasHeight;

// Frame-Loader
const getFramePath = i => `frames2/${(i + 242).toString().padStart(4, '0')}.jpg`;

function drawImageCover(img) {
  const scale = Math.max(canvasWidth / img.width, canvasHeight / img.height);
  const x = (canvasWidth / 2) - (img.width / 2) * scale;
  const y = (canvasHeight / 2) - (img.height / 2) * scale;
  ctx.clearRect(0, 0, canvasWidth, canvasHeight);
  ctx.drawImage(img, x, y, img.width * scale, img.height * scale);
}

function loadFrame(i) {
  if (i < 0 || i >= frameCount) return;
  if (!images[i]) {
    const img = new Image();
    img.src = getFramePath(i);
    img.onload = () => { if (i === currentFrame) drawImageCover(img); };
    images[i] = img;
  }
  return images[i];
}

function preloadNearbyFrames(center, range = 20) {
  for (let offset = -range; offset <= range; offset++) {
    loadFrame(center + offset);
  }
}

loadFrame(0);
preloadNearbyFrames(0, 20);

// --- Scrollanimation --- //
window.addEventListener("scroll", () => {
  const scrollTop = window.scrollY;
  const scrollHeight = document.body.scrollHeight - window.innerHeight;
  const scrollFraction = scrollTop / scrollHeight;
  targetFrame = Math.min(frameCount - 1, Math.floor(scrollFraction * frameCount));
});

function animateFrames() {
  if (currentFrame !== targetFrame) {
    const dir = targetFrame > currentFrame ? 1 : -1;
    currentFrame += dir;
    const img = loadFrame(currentFrame);
    if (img?.complete) drawImageCover(img);
    preloadNearbyFrames(currentFrame, 20);
  }
  requestAnimationFrame(animateFrames);
}
animateFrames();

// --- Nur bei echter Drehung neu aufsetzen --- //
window.addEventListener("orientationchange", () => {
  setTimeout(() => {
    canvasWidth = window.screen.width;
    canvasHeight = window.screen.height;
    canvas.width = canvasWidth;
    canvas.height = canvasHeight;
    if (images[currentFrame]?.complete) drawImageCover(images[currentFrame]);
  }, 500);
});

// Hamburger menu
const hamburger = document.getElementById("hamburger");
const navLinks = document.getElementById("navLinks");
hamburger.addEventListener("click", () => navLinks.classList.toggle("show"));
</script>

</body>
</html>
